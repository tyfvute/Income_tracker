{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">

        <div class="card p-4">
            <h4 class="text-center text-purple mb-4">Добавить Запись</h4>
            <form method="POST">
                <div class="mb-3">
                    <label class="form-label">Сумма:</label>
                    <input type="number" step="0.01" name="amount" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Категория:</label>
                    <select name="category" class="form-select">
                        <option value="Продукты">Продукты</option>
                        <option value="Транспорт">Транспорт</option>
                        <option value="Развлечения">Развлечения</option>
                        <option value="Зарплата">Зарплата</option>
                        <option value="Другое">Другое</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label d-block">Тип:</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="type" id="expense" value="expense" checked>
                        <label class="form-check-label" for="expense">Расход</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="type" id="income" value="income">
                        <label class="form-check-label" for="income">Доход</label>
                    </div>
                </div>
                <button type="submit" class="btn btn-purple">Сохранить Запись</button>
            </form>
        </div>

        <div class="card p-4 text-center mt-4 bg-light">
            <h4 class="text-purple mb-3">Отчет за Текущий Месяц</h4>
            <div style="background-color: #f3e5f5; padding: 20px; border-radius: 5px; border: 1px solid #e1bee7;">
                <h5>Общий Баланс:
                    <span style="font-weight: bold; font-size: 1.5em; color: {% if balance >= 0 %}#28a745{% else %}#dc3545{% endif %};">
                        {{ balance }}
                    </span>
                </h5>
            </div>
            <p class="mt-3 fw-bold">Статистика Расходов по Категориям:</p>
            </div>

        <div class="mt-5 text-center">
            <h4 class="text-purple mb-3">История Транзакций</h4>
            {% if records %}
                <table class="table table-hover text-start">
                    <thead>
                        <tr>
                            <th>Категория</th>
                            <th>Тип</th>
                            <th>Дата</th>
                            <th class="text-end">Сумма</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for record in records %}
                        <tr>
                            <td>{{ record.category }}</td>
                            <td>
                                {% if record.type == 'income' %}
                                    <span class="badge bg-success">Доход</span>
                                {% else %}
                                    <span class="badge bg-danger">Расход</span>
                                {% endif %}
                            </td>
                            <td>{{ record.date }}</td>
                            <td class="text-end fw-bold">{{ record.amount }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="text-muted">Транзакций пока нет. Добавьте первую запись выше!</p>
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}